<!-- index.html -->
<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Bike Sensor Data Visualization</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link href="https://api.mapbox.com/mapbox-gl-js/v2.15.0/mapbox-gl.css" rel="stylesheet" />
  <link href="styles.css" rel="stylesheet" />
  <script src="https://api.mapbox.com/mapbox-gl-js/v2.15.0/mapbox-gl.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@turf/turf@6/turf.min.js"></script>
</head>
<body>
<div id="map"></div>

<div id="controls">
  <h3>ðŸš´ Bike Sensor Data</h3>
  
  <div class="control-group">
    <label class="checkbox-label">
      <input type="checkbox" id="tripsCheckbox" checked>
      Individual Trips
    </label>
    <div class="sub-controls">
      <div class="control-group">
        <label>Filter by Trip:</label>
        <select id="tripFilter">
          <option value="all">All Trips</option>
        </select>
      </div>
      <label class="checkbox-label">
        <input type="checkbox" id="speedSegmentsCheckbox">
        Show Speed Colors
      </label>
      <div class="radio-group">
        <label class="radio-label">
          <input type="radio" name="speedMode" value="gradient" checked>
          Smooth Gradient
        </label>
        <label class="radio-label">
          <input type="radio" name="speedMode" value="categories">
          Speed Categories
        </label>
      </div>
    </div>
  </div>
  
  <div class="control-group">
    <label class="checkbox-label">
      <input type="checkbox" id="aggregatedCheckbox">
      Aggregated Routes (Avg Speed)
    </label>
    <div class="sub-controls">
      <div class="control-group">
        <label>Min Samples: <span id="minSamplesValue">2</span></label>
        <input type="range" id="minSamplesSlider" min="2" max="20" step="1" value="2">
      </div>
    </div>
  </div>
</div>

<div id="stats">
  <h4>Trip Statistics</h4>
  <div class="stat-row">
    <span class="stat-label">Active trips:</span>
    <span class="stat-value" id="statTrips">â€”</span>
  </div>
  <div class="stat-row">
    <span class="stat-label">Avg speed:</span>
    <span class="stat-value" id="statAvgSpeed">â€”</span>
  </div>
</div>

<div class="legend" id="speedLegend" style="display: none;">
  <h4>Speed (km/h)</h4>
  <div class="speed-legend-item">
    <div class="speed-color-box" style="background: #DC2626;"></div>
    <span>Stopped (0-5)</span>
  </div>
  <div class="speed-legend-item">
    <div class="speed-color-box" style="background: #F97316;"></div>
    <span>Very Slow (5-10)</span>
  </div>
  <div class="speed-legend-item">
    <div class="speed-color-box" style="background: #FACC15;"></div>
    <span>Slow (10-15)</span>
  </div>
  <div class="speed-legend-item">
    <div class="speed-color-box" style="background: #BEF264;"></div>
    <span>Moderate (15-20)</span>
  </div>
  <div class="speed-legend-item">
    <div class="speed-color-box" style="background: #4ADE80;"></div>
    <span>Fast (20-25)</span>
  </div>
  <div class="speed-legend-item">
    <div class="speed-color-box" style="background: #22C55E;"></div>
    <span>Very Fast (25-30)</span>
  </div>
  <div class="speed-legend-item">
    <div class="speed-color-box" style="background: #059669;"></div>
    <span>Extreme (30+)</span>
  </div>
</div>

<script type="module" src="config.js"></script>
<script type="module" src="app.js"></script>
</body>
</html>